# **План разработки требований**

## Этап 0: Подготовительный**

1. Погуглить работу с регулярными выражениями для понимания r1.1, r1.2
2. Погуглить про безопасное хранение паролей (хеш, соль)
3. Погуглить структуры данных для дерева
4. Создать репозиторий открытый в git
5. Создать консольное приложение проект в IDEA (r1.8)
6. Написать bash скрипт сборки приложения `build.sh`
7. Написать bash скрипт запуск приложения `run.sh`

## Этап 1: Аутентификация пользователя
1. Написать тесты на авторизацию (r1.12)
    1. Взять тестовые данные
        - Успешная авторизация: `user mypassword`  — 0 
        - Неверный формат логина(цывры):`666user666 newpassword` — 2
        - Неверный формат логина(цифры, прописные): `uSeR2000 pass500p` — 2
        - Неверный формат логина(количество >10): `useranduser pass500p` — 2
        - Неверный формат логина(пустой): `  pass500p` — 2
        - Невеизвестный логин: `useradmin password` — 3
        - Неверный пароль: `user password` — 4
        - Неверный пароль(пустой): `user`  — 4
    2. Написать `bash` скрипт `test.sh`, запускающий программу с тестовыми данными и проверяющий код работы программы с ожидаемым.
    3. Опубликовать изменения в git 
2. Реализовать аутентификацию пользователя по логину и паролю
    1. Реализовать работу с параметрами (R1.8.3, R1.10):
        - Считывание логина и пароля (порядок не важен)
        - Печать справки (R1.8.5, R1.9)
        - Проверка логина на формат `[a-z]{1-10}` (код ошибки 2 R1.9)
    2. Создать `data class User`
    3. Реализовать поиск по логину в множестве `User`
        1. Реализовать возвращение кода 3, если не найден
        2. Реализовать получение хеша по паролю
        3. Реализовать сравнение хешей (0 — успех, 4 — не успех)
3. Протестировать реализацию автотестами
4. Обновить автотесты, если требуется
5. Опубликовать изменения в git

## Этап 2: Авторизация

1. Написать тесты на вторизацию
    1. Взять тестоыве данные
        - Успешная авторизация по логину, паролю и роли READ: `user mypassword read A.B.D` — 0
        - Успешная авторизация по логину, паролю и роли WRITE: `author mypass write A.B.C` — 0
        - Успешная авторизация по логину, паролю и роли EXECUTE: `admin admin execute A.B.C` — 0
        - Повторить неагитивные тесты на коды 2-3-4 для роли read, write и execute — 2,3,4 соответственно
        - Неизвестная роль: `admin admin admin A.B.C` — 5
        - Неизвестная роль - пустая: `admin admin A.B.C` — 5
        - Нет доступа: `user mypassword execute A.B.C` — 6
        - Нет доступа(ресурс пустой): `user mypassword execute` — 6
    2. Дописать  bash скрипт [test.sh](http://test.sh) с тестами 
    3. Опубликовать изменения в git
1. Реализовать авторизацию пользователя по его роли к ресурсу 
    1. Создать перечисление enum Role (R1.3)
    2. Создать data class Resource
    3. Добавить структуру со связью между ресурсом, пользователем и ролью
    4. Создать сервис авторизации
        1. Реализовать поиск ресурса
        2. Реализовать проверку доступа к ресурсу(R1.3, R1.4, R1.6), определяя уровень доступа по дереву
        3. Реализовать возврат кода 6, если доступа нет
    5. Дописать чтение параметрами res, role (R1.8.4)
        - Порядок не важен (R1.10)
        - Проверка формата ресурса (R1.3)
        - Проверку роли (R1.5, R1.8.4)
2. Протестировать реализацию автотестами
3. Обновить автотесты, если требуется
4. Опубликовать изменения в git